name: Release 
 
on: 
  workflow_dispatch: 
 
env: 
  VERSION: '3.2.0' 
 
jobs: 
  build: 
    runs-on: ubuntu-latest 
 
    steps: 
    - name: Checkout code 
      uses: actions/checkout@v2 
 
    - name: Remove unwanted files 
      run: | 
        rm -rf my_workspaces/.my_workspaces 
        rm -rf README.md 
        rm -rd README_EN.md 
        rm -rf .git 
        rm -rf .github 
 
    - name: Create Release 
      id: create_release 
      uses: actions/create-release@v1 
      env: 
        GITHUB_TOKEN: ${{ secrets.MY_TOKEN }} 
      with: 
        tag_name: ${{ env.VERSION }} 
        release_name: UY-Scuti ${{ env.VERSION }} 
        draft: false 
        prerelease: false 
        body:  
          新的功能 
         1、ONEUI 的一键修改功能得到更多添加，现在详细说明，hyperos 和 oneui 都有一键替换，一键添加，你可以在相应的文件夹找到举例，从而知道需要添加与替换什么，小心，oneui 的添加是针对 system 分区，而 hyperos 是针对 product 分区 
         2、CSC 添加，用来给 oneui 增加功能 
         3、修复了未签名验证问题，在之前版本处理不正确 
 
          New features
          1. ONEUI one-click modification function has been added more, now detailed, hyperos and oneui have one-click replacement and one-click addition, you can find examples in the corresponding folders, and know what to add and replace. Note that oneui addition is for system partitions, while hyperos is for product partitions
          2. CSC addition is used to add functions to oneui
          3. Fixed the unsigned verification problem, which was not handled correctly in the previous version 
 
    - name: Archive project 
      run: zip -r UY-Sct_${{ env.VERSION }}.zip . 
 
    - name: Upload Release Asset 
      id: upload_release_asset 
      uses: actions/upload-release-asset@v1 
      env: 
        GITHUB_TOKEN: ${{ secrets.MY_TOKEN }} 
      with: 
        upload_url: ${{ steps.create_release.outputs.upload_url }} 
        asset_path: ./UY-Sct_${{ env.VERSION }}.zip 
        asset_name: UY-Sct_${{ env.VERSION }}.zip 
        asset_content_type: application/zip
